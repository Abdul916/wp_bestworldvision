import{a as x,u as A,A as P}from"./links.DOdXC3mL.js";import"./default-i18n.DXRQgkn2.js";import{_ as w}from"./_plugin-vue_export-helper.BN1snXvA.js";import{u as C}from"./Widgets.DHamkAvV.js";import{B as V}from"./Checkbox.CmdF-nFt.js";import{B as O}from"./RadioToggle.CaTwJt--.js";import{C as M}from"./Card.DPoAfijm.js";import{C as B}from"./ExcludePosts.Cerj59I2.js";import{C as H}from"./PostTypeOptions.Fi0MVcqe.js";import{C as G}from"./SettingsRow.BwYvQArk.js";import{C as R,b as N,c as I,e as z,d as E}from"./Caret.Ke5gylGO.js";import{C as F}from"./Index.6oBmF9Z_.js";import{C as W}from"./Tooltip.DhkkBQWW.js";import{S as q}from"./External.BnlDuPIp.js";import{e as K}from"./index.BR_tv7_M.js";import{v as n,o as p,k as m,l as i,B as o,a as l,t as h,c as $,b as c,F as j,G as J,C as _}from"./runtime-dom.esm-bundler.tPRhSV4q.js";import"./helpers.CXsRrhc8.js";import"./Checkmark.DOG99yeO.js";import"./Slide.fjAuzpC8.js";import"./JsonValues.D25FTfEu.js";import"./AddPlus.D4iYGpm1.js";import"./HighlightToggle.BSgW2-gF.js";import"./Row.DRnp1mVs.js";import"./PostTypes.Cef6XkQ_.js";import"./CheckSolid.CDvG9IOI.js";const Q={setup(){return{optionsStore:x(),rootStore:A()}},components:{CoreAlert:R,CoreUiElementSlider:F,CoreLoader:N,CoreTooltip:W,SvgCircleCheck:I,SvgCircleClose:z,SvgExternal:q,SvgFile:K},props:{displayOptions:{type:Object,required:!0},url:{type:String}},data(){return{pageUrl:"",currentPageUrl:"",buttonLocked:!0,error:!1,isLoading:!1,showResults:!1,showAdvancedSettings:!1,strings:{label:this.$t.__("Display HTML Sitemap",this.$td),page:this.$t.__("Dedicated Page",this.$td),placeholder:this.$t.sprintf(this.$t.__("e.g. %1$s",this.$td),`${this.rootStore.aioseo.urls.home}/new-page`),pageButton:this.$t.__("Open HTML Sitemap",this.$td),errorMessage:this.$t.__("The page that you have entered is invalid or already exists. Please enter a page with a unique slug.",this.$td),errorMessageDisabled:this.$t.sprintf(this.$t.__('Dedicated HTML Sitemaps do not work while using "plain" permalinks. Please update your %1$spermalink structure%2$s to use this option.',this.$td),'<a href="'+this.rootStore.aioseo.urls.home+'/wp-admin/options-permalink.php">',"</a>"),editAndSaveFirst:this.$t.__("To view the sitemap, enter a URL and save changes.",this.$td),saveFirst:this.$t.__("To view the new sitemap, first save changes.",this.$td)}}},created(){this.pageUrl=this.dedicatedPageDisabled?"":this.optionsStore.options.sitemap.html.pageUrl,this.addSiteUrl(),this.pageUrl&&(this.buttonLocked=!1),window.aioseoBus.$on("changes-saved",()=>{this.processChangesSaved()})},computed:{sitemapButtonDisabled(){return this.pageUrl?this.strings.saveFirst:this.strings.editAndSaveFirst},dedicatedPageDisabled(){return this.rootStore.aioseo.data.permalinkStructure===""}},methods:{addSiteUrl(){this.pageUrl&&!this.pageUrl.startsWith(`http://${this.rootStore.aioseo.urls.domain}`)&&!this.pageUrl.startsWith(`https://${this.rootStore.aioseo.urls.domain}`)&&(this.pageUrl=this.rootStore.aioseo.data.isSsl?`https://${this.rootStore.aioseo.urls.domain}/${this.pageUrl}`:`http://${this.rootStore.aioseo.urls.domain}/${this.pageUrl}`)},validateNewSlug(a){if(this.pageUrl=a.target.value,!this.pageUrl){this.optionsStore.options.sitemap.html.pageUrl="";return}if(this.currentPageUrl===this.pageUrl){this.buttonLocked=!1,this.error=!1;return}else this.buttonLocked=!0;this.isLoading=!0,E(()=>{if(/\s/.test(this.pageUrl)){this.error=!0,this.isLoading=!1;return}P.post(this.$links.restUrl("sitemap/validate-html-sitemap-slug")).send({pageUrl:this.pageUrl}).then(s=>{s.body.exists?(this.error=!0,this.showResults=!0):(this.error=!1,this.optionsStore.options.sitemap.html.pageUrl=this.pageUrl),this.isLoading=!1}).catch(()=>{this.error=!0,this.isLoading=!1})},500)},processChangesSaved(){if(!this.pageUrl){this.buttonLocked=!0;return}this.currentPageUrl=this.pageUrl,this.buttonLocked=!1}}},X={class:"new-page"},Y={class:"aioseo-row"},Z={class:"aioseo-col col-xs-12 text-xs-left"},tt=["innerHTML"],et={class:"aioseo-col col-xs-12 col-md-7 text-xs-left"},st={class:"append-icon"},ot={class:"aioseo-col col-xs-12 col-md-5 text-xs-left"},it=["innerHTML"];function nt(a,s,L,e,t,d){const f=n("svg-file"),u=n("svg-circle-close"),D=n("svg-circle-check"),g=n("core-loader"),v=n("base-input"),b=n("svg-external"),S=n("base-button"),y=n("core-tooltip"),T=n("core-alert"),r=n("core-ui-element-slider");return p(),m(r,{label:t.strings.label,options:L.displayOptions,url:L.url},{extra:i(()=>[o(f),l("p",null,h(t.strings.page),1)]),extraBox:i(({item:k})=>[l("div",X,[l("div",Y,[l("div",Z,[k.desc?(p(),$("div",{key:0,class:"aioseo-description",innerHTML:k.desc},null,8,tt)):c("",!0)]),l("div",et,[o(v,{disabled:d.dedicatedPageDisabled,modelValue:t.pageUrl,"onUpdate:modelValue":s[0]||(s[0]=U=>t.pageUrl=U),onKeyup:d.validateNewSlug,onBlur:d.addSiteUrl,size:"medium",placeholder:t.strings.placeholder,onFocus:s[1]||(s[1]=U=>t.showResults=!0),class:J({"aioseo-error":t.error,"aioseo-active":!t.error&&t.pageUrl&&!d.dedicatedPageDisabled})},{"append-icon":i(()=>[l("div",st,[t.isLoading?c("",!0):(p(),$(j,{key:0},[t.error?(p(),m(u,{key:0})):c("",!0),!t.error&&t.pageUrl&&!d.dedicatedPageDisabled?(p(),m(D,{key:1})):c("",!0)],64)),t.isLoading?(p(),m(g,{key:1,dark:""})):c("",!0)])]),_:1},8,["disabled","modelValue","onKeyup","onBlur","placeholder","class"])]),l("div",ot,[!t.pageUrl||t.buttonLocked||t.error||d.dedicatedPageDisabled?(p(),m(y,{key:0,type:"action",tag:"div"},{tooltip:i(()=>[_(h(d.sitemapButtonDisabled),1)]),default:i(()=>[o(S,{disabled:d.dedicatedPageDisabled,class:"aioseo-html-sitemaps-disabled-button",size:"medium",type:"blue",tag:"button"},{default:i(()=>[o(b),_(" "+h(t.strings.pageButton),1)]),_:1},8,["disabled"])]),_:1})):c("",!0),t.pageUrl&&!t.buttonLocked&&!t.error&&!d.dedicatedPageDisabled?(p(),m(S,{key:1,size:"medium",type:"blue",tag:"a",href:t.pageUrl,target:"_blank"},{default:i(()=>[o(b),_(" "+h(t.strings.pageButton),1)]),_:1},8,["href"])):c("",!0)]),t.showResults&&t.error||d.dedicatedPageDisabled?(p(),m(T,{key:0,type:d.dedicatedPageDisabled?"yellow":"red",size:"medium"},{default:i(()=>[l("span",{innerHTML:d.dedicatedPageDisabled?t.strings.errorMessageDisabled:t.strings.errorMessage},null,8,it)]),_:1},8,["type"])):c("",!0)])])]),_:1},8,["label","options","url"])}const at=w(Q,[["render",nt]]),rt={setup(){const{strings:a}=C({name:"htmlSitemap"});return{optionsStore:x(),composableStrings:a}},components:{BaseCheckbox:V,BaseRadioToggle:O,CoreCard:M,CoreExcludePosts:B,CorePostTypeOptions:H,CoreSettingsRow:G,HtmlSitemapDisplayInfo:at},data(){const a=[{name:"post_types",description:this.$t.__("The post types (by slug, comma-separated) that are included in the sitemap.",this.$td)},{name:"taxonomies",description:this.$t.__("The taxonomies (by slug, comma-separated) that are included in the sitemap.",this.$td)},{name:"label_tag",description:this.$t.sprintf(this.$t.__("The HTML tag that is used for the label of each section. Defaults to %1$s.",this.$td),"<code>h4</code>")},{name:"show_label",description:this.$t.sprintf(this.$t.__("Whether the labels should be shown or not. Defaults to %1$s.",this.$td),"<code>true</code>")},{name:"publication_date",description:this.$t.__("Whether the publication date of posts should be shown.",this.$td)},{name:"archives",description:this.$t.__("Whether the regular sitemap or compact date archive sitemap is output.",this.$td)},{name:"order",description:this.$t.sprintf(this.$t.__("The sort direction. The supported values are %1$s and %2$s.",this.$td),"<code>ASC</code>","<code>DESC</code>")},{name:"order_by",description:this.$t.sprintf(this.$t.__("The sort order. The supported values are %1$s, %2$s, %3$s and %4$s.",this.$td),"<code>publish_date</code>","<code>last_updated</code>","<code>alphabetical</code>","<code>id</code>")}];return{sortOrders:[{label:this.$t.__("Publish Date",this.$td),value:"publish_date"},{label:this.$t.__("Last Updated Date",this.$td),value:"last_updated"},{label:this.$t.__("Alphabetical",this.$td),value:"alphabetical"},{label:this.$t.__("Post/Term ID",this.$td),value:"id"}],sortDirections:[{label:this.$t.__("Ascending",this.$td),value:"asc"},{label:this.$t.__("Descending",this.$td),value:"desc"}],displayOptions:{extra:{desc:this.$t.__("Display the sitemap on a dedicated page:",this.$td)},block:{copy:"",desc:this.$t.sprintf(this.$t.__('To add this block, edit a page or post and search for the %1$s"%2$s - HTML Sitemap"%3$s block.',this.$td),"<strong>","AIOSEO","</strong>")},shortcode:{copy:"[aioseo_html_sitemap]",desc:this.$t.sprintf(this.$t.__("Use the following shortcode to display the HTML Sitemap. %1$s",this.$td),this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"htmlSitemapShortcode",!0)),hasAdvanced:!0,attributes:a,attributesDescription:this.$t.__("The following shortcode attributes can be used to override the default settings:",this.$td)},widget:{copy:"",desc:this.composableStrings.visitWidgetsPage},php:{copy:"<?php if( function_exists( 'aioseo_html_sitemap' ) ) aioseo_html_sitemap(); ?>",desc:this.$t.sprintf(this.$t.__("Use the following PHP code anywhere in your theme to display the sitemap. %1$s",this.$td),this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"htmlSitemapFunction",!0)),hasAdvanced:!0,attributes:a,attributesDescription:this.$t.__("The function accepts an associative array with the following arguments that can be used to override the default settings:",this.$td)}},strings:{title:this.$t.__("HTML Sitemap",this.$td),enableSitemap:this.$t.__("Enable Sitemap",this.$td),settings:this.$t.__("HTML Sitemap Settings",this.$td),description:this.$t.__("Using the custom-built tools below, you can add an HTML sitemap to your website and help visitors discover all your content. Adding an HTML sitemap to your website may also help search engines find your content more easily.",this.$td),displayLabel:this.$t.__("Display HTML Sitemap",this.$td),postTypes:this.$t.__("Post Types",this.$td),taxonomies:this.$t.__("Taxonomies",this.$td),includeAllPostTypes:this.$t.__("Include All Post Types",this.$td),selectPostTypes:this.$t.__("Select which Post Types appear in your sitemap.",this.$td),includeAllTaxonomies:this.$t.__("Include All Taxonomies",this.$td),selectTaxonomies:this.$t.__("Select which Taxonomies appear in your sitemap.",this.$td),sortOrder:this.$t.__("Sort Order",this.$td),sortDirection:this.$t.__("Sort Direction",this.$td),publicationDate:this.$t.__("Publication Date",this.$td),publicationDateDescription:this.$t.__("This setting only applies to posts and pages.",this.$td),compactArchives:this.$t.__("Compact Archives",this.$td),compactArchivesDescription:this.$t.sprintf(this.$t.__("This setting allows you to toggle between the regular sitemap or the compact date archive sitemap. %1$s",this.$td),this.$links.getDocLink(this.$constants.GLOBAL_STRINGS.learnMore,"htmlSitemapCompactArchives",!0)),advancedSettings:this.$t.__("Advanced Settings",this.$td),excludePostsPages:this.$t.__("Exclude Posts / Pages",this.$td),excludeTerms:this.$t.__("Exclude Terms",this.$td)}}},methods:{getSortOrder(a){return this.sortOrders.find(s=>s.value===a)},getSortDirection(a){return this.sortDirections.find(s=>s.value===a)}}},lt={class:"aioseo-html-sitemap"},pt={class:"aioseo-settings-row aioseo-section-description"},dt=["innerHTML"],ct={class:"aioseo-description"},ht={class:"aioseo-description"},mt={class:"aioseo-description"},ut=["innerHTML"],_t={key:0};function gt(a,s,L,e,t,d){const f=n("base-toggle"),u=n("core-settings-row"),D=n("html-sitemap-display-info"),g=n("core-card"),v=n("base-checkbox"),b=n("core-post-type-options"),S=n("base-select"),y=n("base-radio-toggle"),T=n("core-exclude-posts");return p(),$("div",lt,[o(g,{slug:"htmlSitemap"},{header:i(()=>[l("span",null,h(t.strings.title),1)]),default:i(()=>[l("div",pt,[_(h(t.strings.description)+" ",1),l("span",{innerHTML:a.$links.getDocLink(a.$constants.GLOBAL_STRINGS.learnMore,"htmlSitemap",!0)},null,8,dt)]),o(u,{name:t.strings.enableSitemap},{content:i(()=>[o(f,{modelValue:e.optionsStore.options.sitemap.html.enable,"onUpdate:modelValue":s[0]||(s[0]=r=>e.optionsStore.options.sitemap.html.enable=r)},null,8,["modelValue"])]),_:1},8,["name"]),e.optionsStore.options.sitemap.html.enable?(p(),m(D,{key:0,label:t.strings.displayLabel,displayOptions:t.displayOptions,url:e.optionsStore.options.sitemap.html.pageUrl},null,8,["label","displayOptions","url"])):c("",!0)]),_:1}),e.optionsStore.options.sitemap.html.enable?(p(),m(g,{key:0,class:"aioseo-html-sitemap-settings",slug:"htmlSitemapSettings"},{header:i(()=>[l("span",null,h(t.strings.settings),1)]),default:i(()=>[o(u,{name:t.strings.postTypes},{content:i(()=>[o(v,{size:"medium",modelValue:e.optionsStore.options.sitemap.html.postTypes.all,"onUpdate:modelValue":s[1]||(s[1]=r=>e.optionsStore.options.sitemap.html.postTypes.all=r)},{default:i(()=>[_(h(t.strings.includeAllPostTypes),1)]),_:1},8,["modelValue"]),e.optionsStore.options.sitemap.html.postTypes.all?c("",!0):(p(),m(b,{key:0,options:e.optionsStore.options.sitemap.html,type:"postTypes",excluded:["attachment"]},null,8,["options"])),l("div",ct,h(t.strings.selectPostTypes),1)]),_:1},8,["name"]),o(u,{name:t.strings.taxonomies},{content:i(()=>[o(v,{size:"medium",modelValue:e.optionsStore.options.sitemap.html.taxonomies.all,"onUpdate:modelValue":s[2]||(s[2]=r=>e.optionsStore.options.sitemap.html.taxonomies.all=r)},{default:i(()=>[_(h(t.strings.includeAllTaxonomies),1)]),_:1},8,["modelValue"]),e.optionsStore.options.sitemap.html.taxonomies.all?c("",!0):(p(),m(b,{key:0,options:e.optionsStore.options.sitemap.html,type:"taxonomies"},null,8,["options"])),l("div",ht,h(t.strings.selectTaxonomies),1)]),_:1},8,["name"]),o(u,{name:t.strings.sortOrder,class:"aioseo-sort-order",align:""},{content:i(()=>[o(S,{size:"medium",options:t.sortOrders,modelValue:d.getSortOrder(e.optionsStore.options.sitemap.html.sortOrder),"onUpdate:modelValue":s[3]||(s[3]=r=>e.optionsStore.options.sitemap.html.sortOrder=r.value)},null,8,["options","modelValue"])]),_:1},8,["name"]),o(u,{name:t.strings.sortDirection,class:"aioseo-sort-direction",align:""},{content:i(()=>[o(S,{size:"medium",options:t.sortDirections,modelValue:d.getSortDirection(e.optionsStore.options.sitemap.html.sortDirection),"onUpdate:modelValue":s[4]||(s[4]=r=>e.optionsStore.options.sitemap.html.sortDirection=r.value)},null,8,["options","modelValue"])]),_:1},8,["name"]),o(u,{name:t.strings.publicationDate,align:""},{content:i(()=>[o(y,{modelValue:e.optionsStore.options.sitemap.html.publicationDate,"onUpdate:modelValue":s[5]||(s[5]=r=>e.optionsStore.options.sitemap.html.publicationDate=r),name:"publicationDate",options:[{label:a.$constants.GLOBAL_STRINGS.hide,value:!1,activeClass:"dark"},{label:a.$constants.GLOBAL_STRINGS.show,value:!0}]},null,8,["modelValue","options"]),l("div",mt,h(t.strings.publicationDateDescription),1)]),_:1},8,["name"]),o(u,{name:t.strings.compactArchives,align:""},{content:i(()=>[o(y,{modelValue:e.optionsStore.options.sitemap.html.compactArchives,"onUpdate:modelValue":s[6]||(s[6]=r=>e.optionsStore.options.sitemap.html.compactArchives=r),name:"compactArchives",options:[{label:a.$constants.GLOBAL_STRINGS.disabled,value:!1,activeClass:"dark"},{label:a.$constants.GLOBAL_STRINGS.enabled,value:!0}]},null,8,["modelValue","options"]),l("div",{class:"aioseo-description",innerHTML:t.strings.compactArchivesDescription},null,8,ut)]),_:1},8,["name"])]),_:1})):c("",!0),e.optionsStore.options.sitemap.html.enable?(p(),m(g,{key:1,slug:"htmlSitemapAdvancedSettings",toggles:e.optionsStore.options.sitemap.html.advancedSettings.enable},{header:i(()=>[o(f,{modelValue:e.optionsStore.options.sitemap.html.advancedSettings.enable,"onUpdate:modelValue":s[7]||(s[7]=r=>e.optionsStore.options.sitemap.html.advancedSettings.enable=r)},null,8,["modelValue"]),l("span",null,h(t.strings.advancedSettings),1)]),default:i(()=>[e.optionsStore.options.sitemap.html.advancedSettings.enable?(p(),$("div",_t,[o(u,{name:t.strings.excludePostsPages,class:"aioseo-exclude-pages-posts",align:""},{content:i(()=>[o(T,{options:e.optionsStore.options.sitemap.html.advancedSettings,type:"posts"},null,8,["options"])]),_:1},8,["name"]),o(u,{name:t.strings.excludeTerms,class:"aioseo-exclude-terms",align:""},{content:i(()=>[o(T,{options:e.optionsStore.options.sitemap.html.advancedSettings,type:"terms"},null,8,["options"])]),_:1},8,["name"])])):c("",!0)]),_:1},8,["toggles"])):c("",!0)])}const zt=w(rt,[["render",gt]]);export{zt as default};
